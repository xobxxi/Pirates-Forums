<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="piratesNewsFeed" title="Pirates News Feed" version_string="1.1.2" version_id="12" url="http://piratesforums.com" install_callback_class="PiratesNewsFeed_Install" install_callback_method="install" uninstall_callback_class="PiratesNewsFeed_Install" uninstall_callback_method="uninstall">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates/>
  <code_events/>
  <code_event_listeners>
    <listener event_id="file_health_check" execute_order="10" callback_class="PiratesNewsFeed_Listener" callback_method="fileHealthCheck" active="1" description="Adds file hashes to health check"/>
    <listener event_id="load_class_controller" execute_order="10" callback_class="PiratesNewsFeed_Listener" callback_method="loadClassController" active="1" description="Extends controllers"/>
  </code_event_listeners>
  <cron>
    <entry entry_id="piratesNewsFeed_update" cron_class="PiratesNewsFeed_CronEntry_News" cron_method="updateNews" active="1"><![CDATA[{"day_type":"dom","dom":["-1"],"hours":["0","6","12","18"],"minutes":["0"]}]]></entry>
  </cron>
  <email_templates/>
  <optiongroups>
    <group group_id="piratesNewsFeed" display_order="1000" debug_only="0"/>
    <option option_id="piratesNewsFeed_count" edit_format="spinbox" data_type="integer" can_backup="1">
      <default_value>6</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="piratesNewsFeed" display_order="0"/>
    </option>
    <option option_id="piratesNewsFeed_forumId" edit_format="spinbox" data_type="integer" can_backup="1">
      <default_value>15</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="piratesNewsFeed" display_order="5"/>
    </option>
    <option option_id="piratesNewsFeed_newsGroupId" edit_format="spinbox" data_type="integer" can_backup="1">
      <default_value>8</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="piratesNewsFeed" display_order="20"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups/>
    <permissions>
      <permission permission_group_id="general" permission_id="piratesNewsFeed_manage" permission_type="flag" default_value="unset" interface_group_id="generalPermissions" display_order="1000"/>
    </permissions>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="cron_entry_piratesNewsFeed_update" version_id="6" version_string="1.1.0"><![CDATA[Update Pirates News Feed]]></phrase>
    <phrase title="option_group_piratesNewsFeed" version_id="3" version_string="1.0"><![CDATA[Pirates News Feed]]></phrase>
    <phrase title="option_group_piratesNewsFeed_description" version_id="3" version_string="1.0"><![CDATA[Facilitates news posting and management from the official Pirates Online blog.]]></phrase>
    <phrase title="option_piratesNewsFeed_count" version_id="1" version_string="1.0"><![CDATA[News Count]]></phrase>
    <phrase title="option_piratesNewsFeed_count_explain" version_id="3" version_string="1.0"><![CDATA[The number of news items to fetch for management.]]></phrase>
    <phrase title="option_piratesNewsFeed_forumId" version_id="1" version_string="1.0"><![CDATA[News Forum ID]]></phrase>
    <phrase title="option_piratesNewsFeed_forumId_explain" version_id="3" version_string="1.0"><![CDATA[The ID of the forum where news may be checked/posted.]]></phrase>
    <phrase title="option_piratesNewsFeed_newsGroupId" version_id="6" version_string="1.1.0"><![CDATA[News Group ID]]></phrase>
    <phrase title="option_piratesNewsFeed_newsGroupId_explain" version_id="6" version_string="1.1.0"><![CDATA[The ID of the group for News Posters.]]></phrase>
    <phrase title="permission_general_piratesNewsFeed_manage" version_id="3" version_string="1.0"><![CDATA[Can manage news]]></phrase>
    <phrase title="piratesNewsFeed_alert_news_new" version_id="6" version_string="1.1.0"><![CDATA[New news was fetched in the <a{link_attributes}>News Manager</a>! Please make sure it is posted in the news forum.]]></phrase>
    <phrase title="piratesNewsFeed_check_news" version_id="1" version_string="1.0"><![CDATA[Check News]]></phrase>
    <phrase title="piratesNewsFeed_latest_news_from_pirates_online" version_id="4" version_string="1.0.0"><![CDATA[Latest News From Pirates Online]]></phrase>
    <phrase title="piratesNewsFeed_mark_not_posted" version_id="4" version_string="1.0.0"><![CDATA[Mark Not Posted]]></phrase>
    <phrase title="piratesNewsFeed_mark_posted" version_id="4" version_string="1.0.0"><![CDATA[Mark Posted]]></phrase>
    <phrase title="piratesNewsFeed_news" version_id="4" version_string="1.0.0"><![CDATA[News]]></phrase>
    <phrase title="piratesNewsFeed_news_already_posted" version_id="4" version_string="1.0.0"><![CDATA[This news item was already posted.]]></phrase>
    <phrase title="piratesNewsFeed_news_could_not_be_fetched" version_id="3" version_string="1.0"><![CDATA[The news item could not be fetched.]]></phrase>
    <phrase title="piratesNewsFeed_news_refreshed" version_id="4" version_string="1.0.0"><![CDATA[The news has been refreshed.]]></phrase>
    <phrase title="piratesNewsFeed_no_news_id" version_id="1" version_string="1.0"><![CDATA[No news ID was specified.]]></phrase>
    <phrase title="piratesNewsFeed_post_news" version_id="4" version_string="1.0.0"><![CDATA[Post News]]></phrase>
    <phrase title="piratesNewsFeed_refresh_news" version_id="4" version_string="1.0.0"><![CDATA[Refresh News]]></phrase>
    <phrase title="piratesNewsFeed_viewing_news" version_id="10" version_string="1.1.0"><![CDATA[Viewing News]]></phrase>
  </phrases>
  <route_prefixes>
    <route_type type="public">
      <prefix original_prefix="news" class="PiratesNewsFeed_Route_Prefix_News" build_link="data_only"/>
    </route_type>
  </route_prefixes>
  <style_properties/>
  <templates>
    <template title="alert_news_new" version_id="6" version_string="1.1.0"><![CDATA[{xen:phrase piratesNewsFeed_alert_news_new,
        'link_attributes= href="{xen:link news}" class="PopupItemLink"'}
]]></template>
    <template title="piratesNewsFeed_confirm_post" version_id="4" version_string="1.0.0"><![CDATA[<xen:title>{xen:phrase piratesNewsFeed_post_news}: {$news.title}</xen:title>

<xen:navigation>
		<xen:breadcrumb href="{xen:link full:forums, $forum}">{$forum.title}</xen:breadcrumb>
		<xen:breadcrumb href="{xen:link full:news}">{xen:phrase piratesNewsFeed_news}</xen:breadcrumb>
</xen:navigation>

<form action="{xen:link news/post-news, $news}" method="post" class="xenForm formOverlay" id="piratesNewsFeedPostNews" data-redirect="on">

	<dl class="ctrlUnit submitUnit">
		<dt></dt>
		<dd>
			<input type="submit" value="{xen:phrase piratesNewsFeed_post_news}" class="button primary" />
		</dd>
	</dl>

	<input type="hidden" name="_xfConfirm" value="1" />
	<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
</form>]]></template>
    <template title="piratesNewsFeed_forum_link" version_id="3" version_string="1.0"><![CDATA[<a href="{xen:link news}" class="OverlayTrigger">{xen:phrase piratesNewsFeed_check_news}</a>]]></template>
    <template title="piratesNewsFeed_news" version_id="4" version_string="1.0.0"><![CDATA[<xen:require css="piratesNewsFeed_news.css" />

<xen:title>{xen:phrase piratesNewsFeed_latest_news_from_pirates_online}</xen:title>

<xen:navigation>
		<xen:breadcrumb href="{xen:link full:forums, $forum}">{$forum.title}</xen:breadcrumb>
		<xen:breadcrumb href="{xen:link full:news}">{xen:phrase piratesNewsFeed_news}</xen:breadcrumb>
</xen:navigation>

<div id="newsContainer" class="sectionMain">
		<xen:foreach loop="$blogs" value="$news">
		<div class="subHeading">
			{$news.title} <span class="floatRight">{$news.date}</span>
		</div>
		<div class="primaryContent">
			<ul>
				<li>
					<a href="{$news.url}" target="_blank">{xen:phrase view}</a>
				</li>
				<xen:if is="!{$news.posted}">
				<li>
					<a href="{xen:link news/post-news, $news}" class="OverlayTrigger">{xen:phrase post}</a>
				</li>
				<li>
					<a href="{xen:link news/mark-posted, $news}">{xen:phrase piratesNewsFeed_mark_posted}</a>
				</li>
				<xen:else />
				<li>
					<a href="{xen:link news/mark-not-posted, $news}">{xen:phrase piratesNewsFeed_mark_not_posted}</a>
				</li>
				</xen:if>
			</ul>
		</div>
		</xen:foreach>
	<div class="sectionFooter"><a href="{xen:link news/refresh}">{xen:phrase piratesNewsFeed_refresh_news}</a></div>
</div>]]></template>
    <template title="piratesNewsFeed_news.css" version_id="6" version_string="1.1.0"><![CDATA[.floatRight
{
        float: right;
}

#newsContainer ul li
{
        margin-left: 20px;
        list-style-type: disc;
}

#newsContainer .sectionFooter
{
        margin-top: 8px;
}

.xenOverlay #newsContainer .sectionFooter
{
        margin-top: 0;
}]]></template>
  </templates>
</addon>
